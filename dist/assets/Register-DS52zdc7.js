import{_ as v,c as u,a as o,m as b,w as i,v as n,t as f,k as p,f as y,g as V,h as k,D as x,y as _,r as d,i as P,j as g}from"./index-C13K5DUh.js";const U={name:"RegisterView",setup(){const m=P(),r=_(),a=d({username:"",email:"",password:"",confirmPassword:""}),e=d(!1),t=d("");return{form:a,isLoading:e,error:t,register:async()=>{if(t.value="",a.value.password!==a.value.confirmPassword){t.value="两次输入的密码不一致";return}try{e.value=!0,await r.register({username:a.value.username,email:a.value.email,password:a.value.password}),m.push("/login")}catch(l){t.value=l.message||"注册失败，请稍后再试"}finally{e.value=!1}}}}},c={class:"register-container"},q={class:"form-group"},N={class:"form-group"},S={class:"form-group"},B={class:"form-group"},C=["disabled"],D={key:0,class:"error-message"},L={class:"login-link"};function R(m,r,a,e,t,w){const l=k("router-link");return g(),u("div",c,[r[11]||(r[11]=o("h1",null,"用户注册",-1)),o("form",{onSubmit:r[4]||(r[4]=x((...s)=>e.register&&e.register(...s),["prevent"]))},[o("div",q,[r[5]||(r[5]=o("label",{for:"username"},"用户名",-1)),i(o("input",{type:"text",id:"username","onUpdate:modelValue":r[0]||(r[0]=s=>e.form.username=s),required:""},null,512),[[n,e.form.username]])]),o("div",N,[r[6]||(r[6]=o("label",{for:"email"},"电子邮箱",-1)),i(o("input",{type:"email",id:"email","onUpdate:modelValue":r[1]||(r[1]=s=>e.form.email=s),required:""},null,512),[[n,e.form.email]])]),o("div",S,[r[7]||(r[7]=o("label",{for:"password"},"密码",-1)),i(o("input",{type:"password",id:"password","onUpdate:modelValue":r[2]||(r[2]=s=>e.form.password=s),required:""},null,512),[[n,e.form.password]])]),o("div",B,[r[8]||(r[8]=o("label",{for:"confirmPassword"},"确认密码",-1)),i(o("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":r[3]||(r[3]=s=>e.form.confirmPassword=s),required:""},null,512),[[n,e.form.confirmPassword]])]),o("button",{type:"submit",disabled:e.isLoading},f(e.isLoading?"注册中...":"注册"),9,C),e.error?(g(),u("p",D,f(e.error),1)):b("",!0),o("p",L,[r[10]||(r[10]=p(" 已有账号？",-1)),y(l,{to:"/login"},{default:V(()=>[...r[9]||(r[9]=[p("立即登录",-1)])]),_:1})])],32)])}const T=v(U,[["render",R],["__scopeId","data-v-9afebf4b"]]);export{T as default};
